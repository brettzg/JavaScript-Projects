<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="">

        <title>Tic-Tac-Toe</title>

        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">

        <link rel="stylesheet" href="style.css">

    </head>


    <body>


        <div class="container">

            <h1 id="header" class="text-center">Tic-Tac-Toe</h1>
            <div id="board-box" class="row">
                <div class="col-3"></div>
                <div class="col-6">
                    <div id="tac-box-1" class="tac-box"><img id ="box-1-img" src=""></div>
                    <div id="tac-box-2" class="tac-box"><img id ="box-2-img" src=""></div>
                    <div id="tac-box-3" class="tac-box"><img id ="box-3-img" src=""></div>
                    <div id="tac-box-4" class="tac-box"><img id ="box-4-img" src=""></div>
                    <div id="tac-box-5" class="tac-box"><img id ="box-5-img" src=""></div>
                    <div id="tac-box-6" class="tac-box"><img id ="box-6-img" src=""></div>
                    <div id="tac-box-7" class="tac-box"><img id ="box-7-img" src=""></div>
                    <div id="tac-box-8" class="tac-box"><img id ="box-8-img" src=""></div>
                    <div id="tac-box-9" class="tac-box"><img id ="box-9-img" src=""></div>                   
                </div>
            </div>
            <div id="choose-settings" class="row">
                <div class="col-3"></div>
                <div class="col-6 text-center">
                    <h2 id="choose-header">Choose Your Weapon</h2>                                
                    <button id="x-button" class="btn">X</button><button id="o-button" class="btn btn-danger">O</button>
                </div>
            </div>


        </div>
        <!-- /.container -->


        <!-- Bootstrap core JavaScript
================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="jquery-3.2.1.js" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>



        <script>
            //x-color #1eff00
            //o-color #ff4000
            //used plixlr.com to edit images
            
            //variables
            var boardState;
            var playerTurn;
            var gameDone;
            var winningPlayer;
            var humanChar;
            
            //onload
            $( document ).ready(function() {
                resetBoard();
                $("#board-box").hide();
                $("#choose-settings").show();
                if (humanChar==='o') {
                    computerMove();
                }
            });

            $("#x-button").click(function() {
                  $("#choose-settings").hide();
                  $("#board-box").fadeIn();
                    humanChar ="x";
            });
            
            $("#o-button").click(function() {
                $("#choose-settings").hide();
                $("#board-box").fadeIn();
                humanChar="o";
            });
            
            $("#tac-box-1").click(function() {
                makeMove(1);               
            });
            
            $("#tac-box-2").click(function() {
                makeMove(2);               
            });
            
            $("#tac-box-3").click(function() {
                makeMove(3);               
            });
            
            $("#tac-box-4").click(function() {
                makeMove(4);               
            });
            
            $("#tac-box-5").click(function() {
                makeMove(5);               
            });
            
            $("#tac-box-6").click(function() {
                makeMove(6);               
            });
            
            $("#tac-box-7").click(function() {
                makeMove(7);               
            });
            
            $("#tac-box-8").click(function() {
                makeMove(8);               
            });
            
            $("#tac-box-9").click(function() {
                makeMove(9);               
            });

            //hides box images
            function hideImages() {
                for (var i=1; i<=9; i++) {
                    var boxImage = "#box-" + i + "-img";
                    $(boxImage).hide();
                    $(boxImage).attr("src","");
                }
            }
            
            function makeMove(boxNumber) {
                var imgName = "#box-" + boxNumber + "-img";
                if (boardState[boxNumber-1]===0) {
                    if (playerTurn==="x-player") {
                        boardState[boxNumber-1] =1;
                        $(imgName).attr("src","cross.png");
                        $(imgName).show();
                        playerTurn="o-player";
                    } else {
                        boardState[boxNumber-1] =2;
                        $(imgName).attr("src","nought.png");
                        $(imgName).show();
                        playerTurn="x-player";
                    }
                    checkForGameEnd();
                    computerMove();
                }
            }
            
            function checkForGameEnd() {
                
                
                //verticals
                checkForCombo(0,3,6);
                checkForCombo(1,4,7);
                checkForCombo(2,5,8);
                
                //horizontals
                checkForCombo(0,1,2);
                checkForCombo(3,4,5);
                checkForCombo(6,7,8);
                
                //diagnols
                checkForCombo(0,4,8);
                checkForCombo(2,4,6);
                
                //check if board is full
                for (var i=0; i<9; i++) {
                    if (boardState[i]===0) {
                        break;
                    }
                    if (i===8) {
                        gameDone=true;
                        winningPlayer="none";
                    }
                }
                                
                if (gameDone) {
                    setTimeout(function(){ resetBoard();}, 1000);                   
                }
            }
            
            function checkForCombo(i,j,k) {
                if (boardState[i] === boardState[j] && boardState[i]===boardState[k] && boardState[i] !==0) {
                    gameDone=true;
                    if (boardState[i]==='1') {
                        winningPlayer="x-player";
                    } else {
                        winningPlayer="o-player";
                    }
                }
                return true;
            }
            
            function resetBoard() {
                hideImages();
                boardState =[0,0,0,0,0,0,0,0,0];
                playerTurn ="x-player";
                gameDone=false;
            }
            
            
            //computer move; called after make move
            function computerMove() {
                
                var spotOpen = false;
                while(spotOpen===false) {
                    var randomNumber = Math.floor(Math.random() *9);
                    if (boardState[randomNumber]===0) {
                        spotOpen=true;
                    }
                }
                randomNumber +=1;
                
                var boxNumber = randomNumber;
                //make move 
                var imgName = "#box-" + boxNumber + "-img";
                if (boardState[boxNumber-1]===0) {
                    if (playerTurn==="x-player") {
                        boardState[boxNumber-1] =1;
                        $(imgName).attr("src","cross.png");
                        $(imgName).fadeIn();
                        playerTurn="o-player";
                    } else {
                        boardState[boxNumber-1] =2;
                        $(imgName).attr("src","nought.png");
                        $(imgName).fadeIn();
                        playerTurn="x-player";
                    }
                    checkForGameEnd();
                }
                
                
                
            }
            
        </script>


    </body>
</html>